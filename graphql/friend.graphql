type Friend 
{
  id: ID
  user_id: User @belongsTo(relation: "user")
  friend_id: User @belongsTo(relation: "friend")
  created_at: DateTime!
  updated_at: DateTime!
}

extend type Query
{
  friends(page: Int!): [Friend!]! @paginateAuth
  friendrequests(page: Int!): [Friend!]! @paginateAuth
}

extend type Mutation
{
  friendRequest(friend_id: ID! @rules(apply: ["unfriend"]) @spread): Friend! @field(resolver: "FriendMutation@request")
  friendRequestAccept(id: ID! @spread): Int! @field(resolver: "FriendMutation@accept")
  friendDelete(id: ID! @rules(apply: ["has:friends"]) @eq): Int! @field(resolver: "FriendMutation@delete")
}

extend type Subscription
{
  friendRequest: Friend
}

